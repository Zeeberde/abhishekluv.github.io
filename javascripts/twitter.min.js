function prettyDate(n){if(navigator.appName==="Microsoft Internet Explorer")return"<span>&infin;<\/span>";var t={just_now:" now",minute_ago:"1m",minutes_ago:"m",hour_ago:"1h",hours_ago:"h",yesterday:"1d",days_ago:"d",last_week:"1w",weeks_ago:"w"},u=new Date,f=u.getTime(),e=f+6e4,o=new Date(n),r=(e-o.getTime())/1e3,i=Math.floor(r/86400);return isNaN(i)||i<0?"<span>&infin;<\/span>":i===0&&(r<60&&t.just_now||r<120&&t.minute_ago||r<3600&&Math.floor(r/60)+t.minutes_ago||r<7200&&t.hour_ago||r<86400&&Math.floor(r/3600)+t.hours_ago)||i===1&&t.yesterday||i<7&&i+t.days_ago||i===7&&t.last_week||i>7&&Math.ceil(i/7)+t.weeks_ago}function linkifyTweet(n,t){var i,r;n=n.replace(/(https?:\/\/)([\w\-:;?&=+.%#\/]+)/gi,'<a href="$1$2">$2<\/a>').replace(/(^|\W)@(\w+)/g,'$1<a href="https://twitter.com/$2">@$2<\/a>').replace(/(^|\W)#(\w+)/g,'$1<a href="https://search.twitter.com/search?q=%23$2">#$2<\/a>');for(i in t)t[i].expanded_url!=null&&(r=new RegExp(t[i].url,"g"),n=n.replace(r,t[i].expanded_url),r=new RegExp(">"+t[i].url.replace(/https?:\/\//,""),"g"),n=n.replace(r,">"+t[i].display_url));return n}function showTwitterFeed(n,t){var u=document.getElementById("tweets"),r="";for(var i in n)r+='<li><p><a href="https://twitter.com/'+t+"/status/"+n[i].id_str+'">'+prettyDate(n[i].created_at)+"<\/a>"+linkifyTweet(n[i].text.replace(/\n/g,"<br>"),n[i].entities.urls)+"<\/p><\/li>";u.innerHTML=r}function getTwitterFeed(n,t,i){t=parseInt(t,10);$.ajax({url:"https://api.twitter.com/1/statuses/user_timeline/"+n+".json?trim_user=true&count="+(t+20)+"&include_entities=1&exclude_replies="+(i?"0":"1")+"&callback=?",type:"jsonp",error:function(){$("#tweets li.loading").addClass("error").text("Twitter's busted")},success:function(i){showTwitterFeed(i.slice(0,t),n)}})}